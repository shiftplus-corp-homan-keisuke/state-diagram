# 使い方ガイド

State Flow Visualizerの使い方を説明します。

## アプリケーションの起動

```bash
cd front
npm run dev
```

ブラウザで http://localhost:5173/ にアクセスします。

---

## 画面構成

### 1. ダイアグラム一覧

アプリを開くと最初に表示される画面です。

- **新規作成ボタン**: 新しいダイアグラムを作成
- **ダイアグラムカード**: 既存のダイアグラムをクリックで開く
- **削除**: カードの削除ボタンで削除

### 2. エディタ画面

ダイアグラムを編集する画面です。

#### ヘッダー

- **← 一覧**: 一覧画面に戻る
- **ダイアグラム名**: クリックで名前を編集
- **JSON**: JSON形式でエクスポート/インポート
- **保存**: 変更を保存

#### サイドバー

- **アクター**: コンポーネント、ストア、サービスなど
- **状態**: 状態定義とスコープ
- **フロー**: イベント/データフローの定義

#### メインビュー

- シーケンス図が表示されます
- ズーム/パン操作が可能

---

## 基本的な使い方

### 1. ダイアグラムを作成

1. 一覧画面で「新規作成」をクリック
2. エディタ画面が開きます
3. 必要に応じてダイアグラム名を編集

### 2. アクターを追加

1. サイドバーの「アクター」セクションで「＋追加」をクリック
2. 種類を選択:
   - 🧩 **component**: UIコンポーネント
   - 📦 **store**: 状態管理ストア
   - ⚙️ **service**: サービス層
   - 🌐 **external**: 外部システム
3. 名前を入力して保存

### 3. 状態を定義

1. サイドバーの「状態」セクションで「＋追加」をクリック
2. スコープを選択:
   - 📍 **ローカル**: コンポーネント内で完結
   - 🌲 **サブツリー**: 特定のコンポーネント以下
   - 🌍 **グローバル**: アプリ全体
3. 名前と所有者を設定して保存

### 4. フローを作成

1. サイドバーの「フロー」セクションで「＋追加」をクリック
2. トリガー条件を設定（例: ボタンクリック）
3. ステップを追加:
   - **dispatch**: アクション発行
   - **stateChange**: 状態変更
   - **subscribe**: 状態購読
   - **effect**: 副作用
   - **render**: 再レンダリング

### 5. 保存

「保存」ボタンをクリックしてダイアグラムを保存します。
データはブラウザのIndexedDBに保存されます。

---

## JSONでの入出力

### エクスポート

1. 「JSON」ボタンをクリック
2. JSONをコピー

### インポート

1. 「JSON」ボタンをクリック
2. JSONを貼り付けて読み込み

---

## 生成AIとの連携

既存のコードベースからダイアグラムを生成できます。

### プロンプト例

```
以下のReactコンポーネントを分析し、
State Flow VisualizerのJSON形式でデータフローを出力してください。

[コードを貼り付け]
```

生成されたJSONをインポートして使用します。

---

## Tips

- **スコープの色分け**: エッジの色でスコープがわかります
  - グレー: ローカル
  - 青: サブツリー
  - 緑: グローバル
- **ミニマップ**: 右下のミニマップで全体を確認
- **ズーム**: マウスホイールでズーム
- **パン**: ドラッグで移動
